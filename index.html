<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Room 101 AR Navigation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <!-- AR.js -->
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.5/aframe/build/aframe-ar.js"></script>

  <script>
    // 箭头动画：上下浮动 + 缓慢旋转
    AFRAME.registerComponent('arrow-animation', {
      tick: function (time, delta) {
        const t = time / 1000;
        this.el.object3D.position.y = 0.35 + Math.sin(t * 2) * 0.08;
        this.el.object3D.rotation.y += delta / 1000 * 0.6;
      }
    });

    // 指引牌呼吸动画
    AFRAME.registerComponent('panel-pulse', {
      tick: function (time) {
        const s = 1 + Math.sin(time / 400) * 0.03;
        this.el.object3D.scale.set(s, s, s);
      }
    });
  </script>
</head>

<body style="margin:0; overflow:hidden;">
  <a-scene
    embedded
    vr-mode-ui="enabled: false"
    arjs="sourceType: webcam; debugUIEnabled: false;"
    renderer="logarithmicDepthBuffer: true;"
  >

    <!-- Camera -->
    <a-entity camera></a-entity>

    <!-- Room 101 Marker -->
    <a-marker type="pattern" url="pattern-room101.patt">

      <!-- Base circle -->
      <a-ring
        position="0 0 0"
        rotation="-90 0 0"
        radius-inner="0.35"
        radius-outer="0.45"
        color="#000">
      </a-ring>

      <!-- Arrow -->
      <a-entity arrow-animation>

        <!-- Arrow body -->
        <a-cylinder
          position="0 0.3 0"
          radius="0.05"
          height="0.6"
          color="#000">
        </a-cylinder>

        <!-- Arrow head -->
        <a-cone
          position="0 0.7 0"
          radius-bottom="0.14"
          height="0.25"
          color="#000">
        </a-cone>

      </a-entity>

      <!-- Direction panel -->
      <a-entity
        position="0 0.05 0.6"
        rotation="-10 0 0"
        panel-pulse>

        <!-- Panel background -->
        <a-plane
          width="1.3"
          height="0.45"
          color="#000">
        </a-plane>

        <!-- Room number -->
        <a-text
          value="ROOM 101"
          position="0 0.10 0.01"
          align="center"
          width="2.5"
          color="#FFF">
        </a-text>

        <!-- Instruction -->
        <a-text
          value="Go straight, then turn left"
          position="0 -0.12 0.01"
          align="center"
          width="2.5"
          color="#FFF">
        </a-text>

      </a-entity>

    </a-marker>
  </a-scene>
</body>
</html>
